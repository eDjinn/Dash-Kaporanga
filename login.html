<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Gerenciador Central</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f4f7f9; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .login-container { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center; width: 90%; max-width: 350px; }
        h2 { color: #1a2533; margin-bottom: 25px; }
        .form-group { margin-bottom: 20px; }
        input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { flex-grow: 1; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: opacity 0.2s; }
        .button-group { display: flex; gap: 10px; margin-top: 10px;}
        #login-btn { background-color: #007bff; color: white; }
        #register-btn { background-color: #6c757d; color: white; }
        #google-login-btn { background-color: #ffffff; color: #444; border: 1px solid #ccc; width: 100%; margin-bottom: 20px; }
        #google-login-btn:hover { background-color: #f2f2f2; }
        button:hover { opacity: 0.85; }
        .error-message { color: #dc3545; margin-top: 15px; font-size: 0.9em; min-height: 20px; }
        .divider { font-size: 0.8em; color: #6c757d; display: flex; align-items: center; text-align: center; margin: 20px 0;}
        .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid #ccc; }
        .divider:not(:empty)::before { margin-right: .25em; }
        .divider:not(:empty)::after { margin-left: .25em; }
    </style>
</head>
<body>
    <div class="login-container">
        <h2>Gerenciador Central</h2>
        <button id="google-login-btn">Entrar com Google</button>
        <div class="divider">ou</div>
        <div class="form-group">
            <input type="email" id="email" placeholder="E-mail" required>
        </div>
        <div class="form-group">
            <input type="password" id="password" placeholder="Senha" required>
        </div>
        <div class="button-group">
            <button id="login-btn">Entrar</button>
            <button id="register-btn">Registrar</button>
        </div>
        <p id="error-message"></p>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC9OjBDOX9UUlCrPuhIZj5ipolRT4Gu420",
            authDomain: "gerenciadorcentral-f01e3.firebaseapp.com",
            projectId: "gerenciadorcentral-f01e3",
            storageBucket: "gerenciadorcentral-f01e3.appspot.com",
            messagingSenderId: "8874050225",
            appId: "1:8874050225:web:a536c7feb14f36af7cd890"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const googleLoginBtn = document.getElementById('google-login-btn');
        const errorMessage = document.getElementById('error-message');

        googleLoginBtn.addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    window.location.href = 'index.html';
                }).catch((error) => {
                    errorMessage.textContent = "Erro ao fazer login com o Google.";
                });
        });

        loginBtn.addEventListener('click', () => {
            const email = emailInput.value;
            const password = passwordInput.value;
            auth.signInWithEmailAndPassword(email, password)
                .then(userCredential => {
                    window.location.href = 'index.html';
                })
                .catch(error => {
                    errorMessage.textContent = 'E-mail ou senha invÃ¡lidos.';
                });
        });

        registerBtn.addEventListener('click', () => {
            const email = emailInput.value;
            const password = passwordInput.value;
            auth.createUserWithEmailAndPassword(email, password)
                .then(userCredential => {
                    window.location.href = 'index.html';
                })
                .catch(error => {
                    errorMessage.textContent = 'Erro ao registrar. Verifique os dados ou tente outro e-mail.';
                });
        });
        
        auth.onAuthStateChanged(user => {
            if (user) {
                window.location.href = 'index.html';
            }
        });
    </script>
</body>
</html>